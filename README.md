

![메인이미지](https://github.com/OurPortfolio/FE/assets/108606678/32f89718-f610-4b36-829e-8fc9ea5455a4)


<br />

### 📋 목차

1. [**프로젝트 기간**](#1)
2. [**서비스 소개**](#2)
3. [**주요 페이지**](#3)
4. [**서비스 주요기능**](#4)
5. [**서비스 개발 멤버 소개**](#5)
6. [**기술 스택**](#6)
7. [**API 명세서**](#7)
8. [**Project Architecture**](#8)
9. [**트러블 슈팅**](#9)
10. [**ERD**](#10)
   <br/>
   <br/>




<div id="1"></div>

### 📅 프로젝트 기간
#### 2023.05.19 - 2023.06.30
- 기획 및 설계 : 23.05.19 ~ 23.05.25
- 프로젝트 구현 : 23.05.25 ~ 23.06.20
- 버그 수정 ,피드백 개선 및 산출물 정리 : 23.06.20 ~ 23.06.29
- 최종 PT : 23.06.30

<br/>
<br/>



<div id="2"></div>

### 🔍 서비스 소개
🌱 개발자, 디자이너, 포토그래퍼가 이용하는 포트폴리오 공유 서비스 🌱

&emsp;&emsp;&emsp; ✍️ 나의 이력과 프로젝트 경험, 기술 스택을 한 곳에 정리

&emsp;&emsp;&emsp; 👀️ 동일 직군인 타인의 포트폴리오 관리 방법을 확인

&emsp;&emsp;&emsp; ✔️️ 카테고리, 필터링, 검색으로 원하는 포트폴리오를 간편하게 찾기

&emsp;&emsp;&emsp; 📊️ 통계로 한눈에 포트폴리오 현황 확인

<br/>
<br/>


#### 서비스 이용해보기 👉 https://ppol.pro/

<br/>

🎬 서비스 소개 영상 : [Youtube Link](https://www.youtube.com/watch?v=ui-9bUsZDSM)

📕 팀 노션 : [6조 노션](https://www.notion.so/POL-f08e011316134cd9976cea479c96a84b) <- 자세히 보고 싶다면 클릭!
<br/>
<br/>




<div id="3"></div>

### 🖼 주요 페이지(배포후 작성)




<br/>
<br/>



<div id="4"></div>

### 📲 서비스 주요기능

| Infinite Scroll(무한 스크롤) | Search(검색 자동완성) |
| :-------- |:------|
|  ![무한스크롤](https://github.com/OurPortfolio/FE/assets/108606678/2f2527d2-6df0-4f39-91d8-e1736c8f6dea)  | ![검색](https://github.com/OurPortfolio/FE/assets/108606678/2ab24f84-10ac-4b95-a6a9-48bae2c0e33f)  | 
| 게시물들을 페이지 변환 없이 스크롤을 하여 계속 확인할 수 있습니다.   | 원하는 키워드로 검색하여 원하는 게시물을 찾아보실수 있습니다.  |

| Crop Image(이미지 크롭) | Responsive(반응형) | 
| :-------- |:------|
| ![이미지 크롭](https://github.com/OurPortfolio/FE/assets/108606678/4e4b5c99-eb3f-4b0d-b7c1-692b392c3288)  | ![반응형](https://github.com/OurPortfolio/FE/assets/108606678/cd2e4f96-a991-44e9-ba18-f7f4c1480f7e) | 
|  포트폴리오 메인 이미지를 사용자가 원하는 부분을 잘라 보여줄수 있습니다.  | Web으로 개발되었지만 Tablet, Mobile 에서도 일그러짐 없이 확인할 수 있습니다.  |

| Dark Mode(다크 모드) |
| :-------- |
|![다크모드](https://github.com/OurPortfolio/FE/assets/108606678/3d274983-acee-4d9b-8455-36035f995f01) | 
| 사용자의 취향, 에너지절약, 시각적편안함을 제공합니다.   |

<br/>
<br/>

<div id="5"></div>

### 👩‍👩‍👧‍👧 서비스 개발 멤버 소개
|             [🚩정승연](https://github.com/xxyeon129)             |             [김효환](https://github.com/HyoHwanKim)              |             [이동언](https://github.com/Undong00)              |              [🚩박지훈](https://github.com/bbakzi)               |              [김민규](https://github.com/kmg0485)              |               [이재호](https://github.com/spainclub)               |              [최원제](https://github.com/co-ze)              |              [최혜민](https://github.com/OurPortfolio/FE/assets/108606678/3d9c3e9d-8245-436b-9da5-fa5fc4e8abae)              |
|:-------------------------------------------------------------:|:-------------------------------------------------------------:|:-------------------------------------------------------------:|:-------------------------------------------------------------:|:------------------------------------------------------------:|:-------------------------------------------------------------:|:-------------------------------------------------------------:|:-------------------------------------------------------------:|
| ![정승연](https://avatars.githubusercontent.com/u/102347529?v=4) | ![김효환](https://avatars.githubusercontent.com/u/108606678?v=4) | ![이동언](https://avatars.githubusercontent.com/u/112850163?v=4) | ![박지훈](https://avatars.githubusercontent.com/u/128371819?v=4) | ![김민규](https://avatars.githubusercontent.com/u/108252926?v=4) | ![이재호](https://avatars.githubusercontent.com/u/125551746?v=4) | ![최원제](https://avatars.githubusercontent.com/u/105447265?v=4) |<img width="250" alt="최혜민" src="https://github.com/OurPortfolio/BE/assets/108252926/60fb3a94-4db0-4002-a6a2-a4f50a529448"> |
|                           FRONT-END                           |                           FRONT-END                           |                           FRONT-END                           |                           BACK-END                            |                           BACK-END                           |                           BACK-END                            |                           BACK-END                            |                           Designer                            |
<br/>
<br/>





<div id="6"></div>

### 🛠 기술 스택

#### FE
<img src="https://img.shields.io/badge/visualstudio-5C2D91?style=for-the-badge&logo=visualstudio&logoColor=white"/> <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"/>  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"/> <img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=white"/> <img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white"/> <img src="https://img.shields.io/badge/reactquery-FF4154?style=for-the-badge&logo=reactquery&logoColor=white"/> <img src="https://img.shields.io/badge/axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white"/> <img src="https://img.shields.io/badge/styledcomponents-DB7093?style=for-the-badge&logo=styledcomponents&logoColor=white"/> <img src="https://img.shields.io/badge/redux-764ABC?style=for-the-badge&logo=redux&logoColor=white"/> <img src="https://img.shields.io/badge/reactrouter-CA4245?style=for-the-badge&logo=reactrouter&logoColor=white"/> <img src="https://img.shields.io/badge/JWT-Decoder-FF6C37?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/react-datepicker-61DAFB?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/react-observer-61DAFB?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/stomp-000000?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/sockJS-F7DF1E?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/nanoid-3DDC84?style=for-the-badge&logoColor=white"/>  <img src="https://img.shields.io/badge/AWS-CLI-232F3E?style=for-the-badge&logo=amazonaws&logoColor=white"/> <img src="https://img.shields.io/badge/AmazonS3-569A31?style=for-the-badge&logo=AmazonS3&logoColor=white"/> <img src="https://img.shields.io/badge/CloudFront-527FFF?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/AWS Route 53-FF6C37?style=for-the-badge&logoColor=white">

<br/>

#### BE
<img src="https://img.shields.io/badge/IntelliJIDEA-000000?style=for-the-badge&logo=IntelliJIDEA&logoColor=white"/> <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white"/> <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"/> <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"/> <img src="https://img.shields.io/badge/linux-FCC624?style=for-the-badge&logo=linux&logoColor=black"> <img src="https://img.shields.io/badge/aws-232F3E?style=for-the-badge&logo=aws&logoColor=white"> <img src="https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=Java&logoColor=white"/> <img src="https://img.shields.io/badge/gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white"/> <img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=spring&logoColor=white"/> <img src="https://img.shields.io/badge/SpringSecurity-6DB33F?style=for-the-badge&logo=SpringSecurity&logoColor=white"/> <img src="https://img.shields.io/badge/SpringBoot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"/> <img src="https://img.shields.io/badge/jsonwebtokens-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white"> <img src="https://img.shields.io/badge/Web Socket-02303A?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/stomp-02303A?style=for-the-badge&logoColor=white"/><img src="https://img.shields.io/badge/AmazonRDS-527FFF?style=for-the-badge&logo=AmazonRDS&logoColor=white"/> <img src="https://img.shields.io/badge/redis-DC382D?style=for-the-badge&logo=redis&logoColor=white"/> <img src="https://img.shields.io/badge/AWS Route 53-FF6C37?style=for-the-badge&logoColor=white"> <img src="https://img.shields.io/badge/CloudFront-527FFF?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/apachejmeter-D22128?style=for-the-badge&logo=apachejmeter&logoColor=white"/> <img src="https://img.shields.io/badge/Jacoco-D22128?style=for-the-badge&logoColor=white"/> <img src="https://img.shields.io/badge/https-527FFF?style=for-the-badge"> <img src="https://img.shields.io/badge/AmazonEC2-FF9900?style=for-the-badge&logo=AmazonEC2&logoColor=white"/> <img src="https://img.shields.io/badge/AmazonS3-569A31?style=for-the-badge&logo=AmazonS3&logoColor=white"/> <img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white"/> <img src="https://img.shields.io/badge/Ubuntu-E95420?style=for-the-badge&logo=Ubuntu&logoColor=white"/> <img src="https://camo.githubusercontent.com/54a2f74f3cbb3cb810faa417fb9a56b4d947be01e868ab624b3f251a1062257b/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f67697468756220616374696f6e732d3230383846463f7374796c653d666f722d7468652d6261646765266c6f676f3d67697468756220616374696f6e73266c6f676f436f6c6f723d7768697465"> <img src="https://camo.githubusercontent.com/a831a652fb5370367ee71ae4255e39623b9edf7e60ffbcf7ba356b1d82a09538/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f737072696e672064617461206a70612d4632384431413f7374796c653d666f722d7468652d6261646765266c6f676f3d737072696e67646174616a7061266c6f676f436f6c6f723d7768697465">

<br/>
<br/>
<br/>



<div id="7"></div>

### |[📋 서비스 브로슈어](https://teamsparta.notion.site/POL-6-f6f92f3e7ad5412ab193b929b5c1b9b3)|[✅ API 명세서](https://www.notion.so/API-323ae58c531c455cbdd5409fe63bee3f)|


<br/>
<br/>



<div id="8"></div>

### 🌏 Project Architecture
![image](https://github.com/OurPortfolio/BE/assets/108252926/7e2c6d19-0a10-4b58-b19c-e5335ae057c0)

<br/>
<br/>

<div id="9"></div>

### 🔥 트러블 슈팅
FE

<details>
<summary>액세스 토큰 null</summary>

| 진행 순서 | 내용    |
| :-------- |:------|
| 😱 문제   | Axios Header에 Authorization: accessToken을 넣어 로그인을 진행한 후 프로젝트 작성 및 수정과 같은 accesstoken을 사용하는 작업을 할 시 정상적인 상황이라면 accesstoken에 토큰이 담아져야 하는데 null 값이 들어가 작업을 진행할 수 없게 되는 문제가 발생함.   |
| 😭 시도   | 기존에 const accessToken = localStorage.getItem('accesstoken'); 은 로컬 스토리지에서 액세스 토큰이라는 키에 해당하는 값을 가져오는 것이다.이 때 accessToken 을 사용하게 되면 토큰 값을 즉시 획득한다. 그래서 액세스 토큰이 로그인을 거칠 경우 로그인 전에 모듈이 로드되어 액세스 토큰 값이 null 이되어 토큰을 사용하여 작업이 불가능하게 됨. |
| 😄 해결   | ![엑세스토큰 트러블슈팅](https://github.com/OurPortfolio/FE/assets/108606678/28264a0f-77fd-48a9-9cc1-434590154025) |

</details>

<details>
<summary>무한 스크롤</summary>

| 진행 순서 | 내용   |
| :------------ |:--------------------------------------------|
| 😱 <br/> 문제   | 스크롤 시 중복되는 데이터 호출, 스크롤 떨림 현상 |
| 😭 <br/> 시도   | ![무한스크롤 문제상황 1](https://github.com/OurPortfolio/FE/assets/108606678/39f2f885-2a08-4724-a22c-ef7440ac5b4c)  ![무한스크롤 문제상황 2](https://github.com/OurPortfolio/FE/assets/108606678/2c5fa89b-d70c-4003-a73d-a8e2cafa680d) |
| 😄 <br/> 해결   | ![무한스크롤 문제상황 해결](https://github.com/OurPortfolio/FE/assets/108606678/823de8aa-27c9-4b40-a48a-ccf49b0e62e2) |

</details>

<br/>
BE

<details>
<summary>테스트 코드 1</summary>

| 진행 순서 | 내용                                                                                                                                   |
| :-------- |:-------------------------------------------------------------------------------------------------------------------------------------|
| 😱 문제   | Controller 테스트 코드를 작성할 때 권한이 없어서 403에러 발생                                                                                            |
| 😭 시도   | mockMvc에 with(SecurityMockMvcRequestPostProcessors.csrf()) 를 추가했더니 <br/> 403 에러는 나오지 않았지만 401 에러 발생                                  |
| 😄 해결   | userDetails 를 SecurityMockMvcRequestPostProcessors.user(userDetails) 으로 <br/>mockMvc에 @AuthenticationPrincipal 파라미터 전달하는 방식 사용 <br/> |
```java
UserDetailsImpl userDetails = UserDetailsImpl(userRepository.findById(1L).get());

mockMvc.perform(.with(SecurityMockMvcRequestPostProcessors.user(userDetails)))
```

</details>

<details>
<summary>테스트 코드 2</summary>

| 진행 순서 | 내용                                                                                                                              |
| :-------- |:--------------------------------------------------------------------------------------------------------------------------------|
| 😱 문제   | @RequestBody 의 Json 타입의 데이터는 제대로 받아오지만, <br/>@RequestPart 의 Json 타입의 데이터는 받지 못하는 문제                                                  |
| 😭 시도   | .part() .content() 를 사용해서 DTO를 전달해보려고 했지만 <br/>MultipartFile 외에 다른 값을 받을 때 DTO 가 아닌 단일객체타입으로 받아온다.                                   |
| 😄 해결   | DTO 를 Json 형식의 MultipartFile 로 만들어서 같이 보내줬다. <br/> |
```java
MockMultipartFile newRequestDto = new MockMultipartFile("nickname", "updateUserRequestDto1", "application/json", newCreateJson.getBytes(StandardCharsets.UTF_8));
MockMultipartFile image = new MockMultipartFile("profileImage", "test.jpg", "image/jpeg", "Test Image".getBytes());

mockMvc.perform(
        multipart(HttpMethod.PATCH, "/api/users/" + userId)
        .file(newRequestDto)
        .file(image)
        .contentType(MediaType.MULTIPART_FORM_DATA_VALUE)
        .with(user(userDetails1))
        )
```

</details>

<details>
<summary>N + 1</summary>

| 진행 순서 | 내용                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| :-------- |:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 😱 문제   | 포트폴리오 전체 조회, 검색어 조회, Trie 초기화 메서드, 조회수 순서 조회가 수행될 때 <br/>N+1이 발생하는 것을 확인. N+1이 발생했을 때 실제로 어떤 문제가 있는지 <br/>확인하기 위해서 Jmeter를 사용해 부하 테스트를 진행N+1이 발생했을 때 <br/> 실제로 어떤 문제가 있는지 확인하기 위해서 Jmeter를 사용해 부하 테스트를 진행 <br/><img width="670" alt="스크린샷 2023-06-28 11 29 39" src="https://github.com/OurPortfolio/BE/assets/108252926/58ebbeef-14c6-44fc-b1a2-cd43c6dbac6b"> <br/>처리 시간이 1분 09초 소요 됐으며 시간 당 처리량은 145로 측정 됐다. <br/>생각보다 많은 시간이 소요 됐고, 성능 개선이 필요하다고 판단                       |
| 😄 해결   | - QueryDsl + Join Fetch <br/>&emsp; 이미 QueryDsl을 사용하고 있기 때문에 join절을 추가해서 쿼리를 최적화 할 수 있다. <br/>  - 중복되는 데이터 확인 <br/>&emsp; Set을 사용해서 중복을 허용하지 않는 방법이 있다. 현재 프로젝트 경우 컬렉션에 <br/>&emsp;중복되는 데이터가 존재할 상황이 없을 거라고 판단하고 List로 유지 <br/> - N+1 해결 후 테스트 결과 <br/><img width="670" alt="스크린샷 2023-06-28 11 38 09" src="https://github.com/OurPortfolio/BE/assets/108252926/4c11cca2-52f5-457b-b799-a272bed1a68c"> <br/>처리 시간은 25초로 기존 보다 44초 감소 했고, 시간 당 처리량은 해결 전 보다 162% 상승 |
```java
//QueryDsl + Join Fetch
List<Portfolio> findResult = queryFactory
        .select(portfolio)
        .from(portfolio)
        .join(portfolio.user, user)
        .fetchJoin()
        .fetch();
```

</details>

<details>
<summary>소셜 로그인</summary>

| 진행 순서 | 내용                                                                                                                                                                                                                                                                                                                                                                  |
| :-------- |:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 😱 문제   | 기존 회원가입에서 이메일을 등록하고, 소셜 회원가입 시에도 이메일을 사용하면서 <br/>이메일이 중복될 수 있는 문제가 발생. <br/>여러개의 소셜 회원가입 시에도 문제가 생길 수 있다고 판단.                                                                                                                                                                                                                                                       |
| 😭 시도   | 1. 소셜 회원가입 할 때에 동일한 이메일의 존재 등 다양한 상황들을 고려 <br/> 2. 유저가 처음엔 일반 회원가입을 하고 나중에 소셜로 연동시킬 수 있는 상황이 있기 때문에 <br/>&emsp;따로 유니크한 유저를 만드는 것은 옳지 못하다고 판단 <br/> 3. 유저에 컬럼을 생성해서 각 소셜의 id값을 같이 저장하는 방식을 채택                                                                                                                                                                        |
| 😄 해결   | 1. 기존 유저 회원가입 할 때 예외사항들을 면밀하게 검토하여 예외처리들을 실시 <br/> 2. 기존 테이블에 컬럼을 추가하여 소셜회원으로 받을 때에는 해당 소셜의 id값을 추가로 가져오도록 함<br/> <img width="670" alt="스크린샷 2023-06-28 11 43 48" src="https://github.com/OurPortfolio/BE/assets/108252926/24d83d1b-ea8a-4769-b0a1-54b5cb4bb54f"> <br/> 동일한 이메일로 접속을 하여도 동일한 값에서 소셜로그인 값들을 가질 수 있도록 <br/> id로 구분해서 받게하여 무분별한 데이터의 증강을 억제하고자함. |

</details>

<details>
<summary>scripts/deploy.sh 파일의 경로 오류</summary>

| 진행 순서 | 내용                                                                                                                                                                                                              |
| :-------- |:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 😱 문제   | scripts/deploy.sh에서 경로 설정을 해주었지만 jar 파일의 경로를 찾아가지 못하여 실행이 되지 않음.                                                                                                                                                |
| 😭 시도   | pwd 명령어를 사용해 경로를 다시 체크 해봤지만 해결 되지 않았다. <br/>이전에 경로를 설정했을때는 /home/ubuntu가 포함되지 않았다. <br/> <img width="670" alt="2113" src="https://github.com/OurPortfolio/BE/assets/108252926/12196932-7efa-4af3-b8b4-80f392642672"> |
| 😄 해결   | JAR 파일이 있는 디렉토리를 명시적으로 지정해 주었더니 경로를 찾지 못해 <br/>JAR 파일의 경로를 패턴을 통해 찾도록 설정                                                                                                                                                                                                           |
```bash
#기존코드
REPOSITORY=/firstcicd-ec2/build/libs/
cd $REPOSITORY

APP_NAME=firstcicd-ec2
JAR_NAME=$(ls $REPOSITORY | grep 'SNAPSHOT.jar' | tail -n 1)
JAR_PATH=$REPOSITORY/$JAR_NAME
```
```bash
#해결을 위한 시도
REPOSITORY=/home/ubuntu/firstcicd-ec2/build/libs/
cd $REPOSITORY

APP_NAME=firstcicd-ec2
JAR_NAME=$(ls $REPOSITORY | grep 'SNAPSHOT.jar' | tail -n 1)
JAR_PATH=$REPOSITORY/$JAR_NAME
```
```bash
#문제 해결
BASE_PATH="/home/ubuntu/firstcicd-ec2"
BUILD_PATH=$(ls $BASE_PATH/build/libs/*.jar)
JAR_NAME=$(basename "$BUILD_PATH")

cd $BASE_PATH

APP_NAME="firstcicd-ec2"
JAR_PATH="$BASE_PATH/build/libs/$JAR_NAME"
```
</details>
<br/>
<br/>

<div id="10"></div>

### 🗺️ ERD
![image](https://github.com/OurPortfolio/BE/assets/108252926/e27aea6c-fadc-44e9-bdee-7339fe218637)
